[:project
 {:projections [{a f.1/a}]}
 [:map
  {:projections [{_sq_4 true}]}
  [:map
   {:projections [{_sq_2 true}]}
   [:semi-join
    {:conditions [{f.1/b xt.values.5/_column_1}]}
    [:semi-join
     {:conditions [{f.1/a xt.values.3/_column_1}]}
     [:rename {:prefix f.1} [:scan {:table #xt/table foo, :columns [{a (== a 42)} b]}]]
     [:rename {:prefix xt.values.3} [:table [_column_1] [{:_column_1 1} {:_column_1 2}]]]]
    [:rename {:prefix xt.values.5} [:table [_column_1] [{:_column_1 3} {:_column_1 4}]]]]]]]
